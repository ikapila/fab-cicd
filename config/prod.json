{
  "artifacts_root_folder": "wsartifacts",
  "service_principal": {
    "secret_env_var": "AZURE_CLIENT_SECRET_PROD"
  },
  "workspace": {
    "id": "00000000-0000-0000-0000-000000000000",
    "name": "DataEng-Prod",
    "capacity_id": "00000000-0000-0000-0000-000000000000"
  },
  "lakehouses": {
    "SalesDataLakehouse": {
      "id": "00000000-0000-0000-0000-000000000000",
      "description": "Production lakehouse for sales data"
    },
    "CustomerDataLakehouse": {
      "id": "00000000-0000-0000-0000-000000000000",
      "description": "Production lakehouse for customer data"
    }
  },
  "connections": {
    "sql_connection_string": "Server=prod-reporting-gold.datawarehouse.fabric.microsoft.com;Database=reporting_gold;",
    "semantic_model_connection": "",
    "semantic_model_connection_id": "",
    "storage_connection_string": "DefaultEndpointsProtocol=https;AccountName=prodstorageaccount;",
    "api_endpoint": "https://api.company.com"
  },
  "parameters": {
    "storage_account": "prodstorageaccount",
    "key_vault_url": "https://prod-kv.vault.azure.net/",
    "data_lake_path": "abfss://prod@prodstorageaccount.dfs.core.windows.net/",
    "log_level": "WARNING",
    "enable_monitoring": "true",
    "batch_size": "1000",
    "max_retries": "5"
  },
  "rebind_rules": {
    "semantic_models": {
      "enabled": true
    },
    "reports": {
      "target_workspace_id": "{{workspace_id}}"
    },
    "paginated_reports": {
      "enabled": true
    }
  },
  "artifacts_to_create": {
    "lakehouses": [
      {
        "name": "SalesDataLakehouse",
        "description": "Production lakehouse for sales data",
        "create_if_not_exists": true
      },
      {
        "name": "CustomerDataLakehouse",
        "description": "Production lakehouse for customer data",
        "create_if_not_exists": true
      }
    ],
    "environments": [
      {
        "name": "ProdSparkEnvironment",
        "description": "Production Spark environment",
        "create_if_not_exists": true,
        "libraries": [
          {"type": "PyPI", "name": "pandas", "version": "2.1.0"},
          {"type": "PyPI", "name": "numpy", "version": "1.24.0"},
          {"type": "PyPI", "name": "scikit-learn", "version": "1.3.0"}
        ]
      }
    ],
    "kql_databases": [
      {
        "name": "ProdAnalyticsDB",
        "description": "Production KQL database for real-time analytics",
        "create_if_not_exists": true
      }
    ],
    "notebooks": [
      {
        "name": "SetupNotebook",
        "description": "Initial setup and configuration notebook",
        "create_if_not_exists": true,
        "template": "basic_spark",
        "default_lakehouse": "SalesDataLakehouse"
      }
    ],
    "spark_job_definitions": [
      {
        "name": "BaselineSparkJob",
        "description": "Baseline Spark job template",
        "create_if_not_exists": true,
        "main_file": "SetupNotebook",
        "default_lakehouse": "SalesDataLakehouse"
      }
    ],
    "data_pipelines": [
      {
        "name": "InitialPipeline",
        "description": "Initial data pipeline template",
        "create_if_not_exists": true,
        "activities": [
          {
            "name": "Placeholder",
            "type": "Script",
            "script": "print('Pipeline placeholder')"
          }
        ]
      }
    ],
    "shortcuts": [
      {
        "name": "SharedData",
        "description": "OneLake shortcut to shared data",
        "lakehouse": "SalesDataLakehouse",
        "path": "Tables",
        "create_if_not_exists": true,
        "target": {
          "oneLake": {
            "workspaceId": "shared-workspace-id-prod",
            "itemId": "shared-lakehouse-id-prod",
            "path": "Tables/MasterData"
          }
        }
      }
    ],
    "semantic_models": [
      {
        "name": "SalesAnalyticsModel",
        "description": "Semantic model for sales analytics",
        "create_if_not_exists": true
      }
    ],
    "reports": [
      {
        "name": "SalesDashboard",
        "description": "Executive sales dashboard",
        "semantic_model": "SalesAnalyticsModel",
        "create_if_not_exists": true
      }
    ],
    "paginated_reports": [
      {
        "name": "MonthlySalesReport",
        "description": "Detailed monthly sales report",
        "create_if_not_exists": true
      }
    ],
    "variable_libraries": [
      {
        "name": "ProdVariables",
        "description": "Production environment runtime variables",
        "create_if_not_exists": true,
        "variables": [
          {
            "name": "storage_account",
            "value": "prodstorageaccount",
            "type": "String",
            "description": "Azure Storage Account name for production"
          },
          {
            "name": "api_endpoint",
            "value": "https://api.contoso.com",
            "type": "String",
            "description": "Production API endpoint URL"
          },
          {
            "name": "log_level",
            "value": "WARNING",
            "type": "String",
            "description": "Logging level for production"
          },
          {
            "name": "batch_size",
            "value": "10000",
            "type": "Int",
            "description": "Batch size for data processing"
          }
        ]
      }
    ],
    "sql_views": [
      {
        "lakehouse": "SalesDataLakehouse",
        "views": ["SalesSummary", "ProductAnalysis", "RegionalPerformance"],
        "description": "Sales analytics views for production environment"
      }
    ]
  },
  "git_integration": {
    "auto_update_from_git": false,
    "conflict_resolution_policy": "PreferRemote",
    "allow_override_items": true
  },
  "deployment_pipeline": {
    "enabled": true,
    "pipeline_name": "DataEng-Pipeline",
    "source_stage_order": 1,
    "target_stage_order": 2,
    "artifact_types": ["PaginatedReport"],
    "allow_create_artifact": true,
    "allow_overwrite_artifact": true,
    "allow_overwrite_target_artifact_label": true,
    "allow_skip_tiles_with_missing_prerequisites": true,
    "data_source_mapping": {
      "description": "Data source rules applied automatically when deploying to Prod. Maps UAT data sources to Prod equivalents.",
      "sql_server": "prod-reporting-gold.datawarehouse.fabric.microsoft.com",
      "sql_database": "reporting_gold"
    }
  }
}
