{
  "name": "SalesDailyOrchestration",
  "id": "pipeline-sales-daily-001",
  "description": "Daily orchestration pipeline for sales data processing",
  "dependencies": ["notebook-ProcessSalesData", "sparkjob-daily-sales-001"],
  "definition": {
    "properties": {
      "activities": [
        {
          "name": "CheckDataAvailability",
          "type": "Script",
          "description": "Check if new data is available for processing",
          "typeProperties": {
            "scriptType": "Python",
            "script": "print('Checking for new sales data...')"
          }
        },
        {
          "name": "ProcessSalesNotebook",
          "type": "Notebook",
          "dependsOn": [
            {
              "activity": "CheckDataAvailability",
              "dependencyConditions": ["Succeeded"]
            }
          ],
          "typeProperties": {
            "notebook": {
              "referenceName": "ProcessSalesData",
              "type": "NotebookReference"
            },
            "parameters": {
              "execution_date": "@pipeline().parameters.execution_date"
            }
          }
        },
        {
          "name": "RunSalesAggregation",
          "type": "SparkJob",
          "dependsOn": [
            {
              "activity": "ProcessSalesNotebook",
              "dependencyConditions": ["Succeeded"]
            }
          ],
          "typeProperties": {
            "sparkJobDefinition": {
              "referenceName": "DailySalesAggregation",
              "type": "SparkJobDefinitionReference"
            }
          }
        },
        {
          "name": "SendSuccessNotification",
          "type": "Script",
          "dependsOn": [
            {
              "activity": "RunSalesAggregation",
              "dependencyConditions": ["Succeeded"]
            }
          ],
          "typeProperties": {
            "scriptType": "Python",
            "script": "print('Sales processing completed successfully!')"
          }
        },
        {
          "name": "HandleFailure",
          "type": "Script",
          "dependsOn": [
            {
              "activity": "ProcessSalesNotebook",
              "dependencyConditions": ["Failed"]
            },
            {
              "activity": "RunSalesAggregation",
              "dependencyConditions": ["Failed"]
            }
          ],
          "typeProperties": {
            "scriptType": "Python",
            "script": "print('Sales processing failed! Sending alert...')"
          }
        }
      ],
      "parameters": {
        "execution_date": {
          "type": "String",
          "defaultValue": "@utcnow()"
        }
      },
      "variables": {
        "process_status": {
          "type": "String",
          "defaultValue": "InProgress"
        }
      }
    }
  },
  "triggers": [
    {
      "name": "DailyScheduleTrigger",
      "type": "ScheduleTrigger",
      "typeProperties": {
        "recurrence": {
          "frequency": "Day",
          "interval": 1,
          "startTime": "2024-01-01T02:00:00Z",
          "timeZone": "UTC",
          "schedule": {
            "hours": [2],
            "minutes": [0]
          }
        }
      }
    }
  ]
}
