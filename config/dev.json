{
  "artifacts_root_folder": "wsartifacts",
  "service_principal": {
    "secret_env_var": "AZURE_CLIENT_SECRET_DEV"
  },
  "workspace": {
    "id": "00000000-0000-0000-0000-000000000000",
    "name": "DataEng-Dev",
    "capacity_id": "00000000-0000-0000-0000-000000000000"
  },
  "lakehouses": {
    "SalesDataLakehouse": {
      "id": "00000000-0000-0000-0000-000000000000",
      "description": "Development lakehouse for sales data"
    },
    "CustomerDataLakehouse": {
      "id": "00000000-0000-0000-0000-000000000000",
      "description": "Development lakehouse for customer data"
    }
  },
  "connections": {
    "sql_connection_string": "Server=dev-reporting-gold.datawarehouse.fabric.microsoft.com;Database=reporting_gold;",
    "semantic_model_connection": "",
    "semantic_model_connection_id": "",
    "storage_connection_string": "DefaultEndpointsProtocol=https;AccountName=devstorageaccount;",
    "api_endpoint": "https://dev-api.company.com"
  },
  "parameters": {
    "storage_account": "devstorageaccount",
    "key_vault_url": "https://dev-kv.vault.azure.net/",
    "data_lake_path": "abfss://dev@devstorageaccount.dfs.core.windows.net/",
    "log_level": "DEBUG",
    "enable_monitoring": "false",
    "batch_size": "100",
    "max_retries": "3"
  },
  "rebind_rules": {
    "semantic_models": {
      "enabled": true
    },
    "reports": {
      "target_workspace_id": "{{workspace_id}}"
    },
    "paginated_reports": {
      "enabled": true
    }
  },
  "artifacts_to_create": {
    "lakehouses": [
      {
        "name": "SalesDataLakehouse",
        "description": "Development lakehouse for sales data",
        "create_if_not_exists": true
      },
      {
        "name": "CustomerDataLakehouse",
        "description": "Development lakehouse for customer data",
        "create_if_not_exists": true
      }
    ],
    "environments": [
      {
        "name": "DevSparkEnvironment",
        "description": "Development Spark environment",
        "create_if_not_exists": true,
        "libraries": [
          {"type": "PyPI", "name": "pandas", "version": "2.1.0"},
          {"type": "PyPI", "name": "numpy", "version": "1.24.0"}
        ]
      }
    ],
    "kql_databases": [
      {
        "name": "DevAnalyticsDB",
        "description": "Development KQL database for real-time analytics",
        "create_if_not_exists": true
      }
    ],
    "notebooks": [
      {
        "name": "SetupNotebook",
        "description": "Initial setup and configuration notebook",
        "create_if_not_exists": true,
        "template": "basic_spark",
        "default_lakehouse": "SalesDataLakehouse"
      }
    ],
    "spark_job_definitions": [
      {
        "name": "BaselineSparkJob",
        "description": "Baseline Spark job template",
        "create_if_not_exists": true,
        "main_file": "SetupNotebook",
        "default_lakehouse": "SalesDataLakehouse"
      }
    ],
    "data_pipelines": [
      {
        "name": "InitialPipeline",
        "description": "Initial data pipeline template",
        "create_if_not_exists": true,
        "activities": [
          {
            "name": "Placeholder",
            "type": "Script",
            "script": "print('Pipeline placeholder')"
          }
        ]
      }
    ],
    "shortcuts": [
      {
        "name": "SharedData",
        "description": "OneLake shortcut to shared data",
        "lakehouse": "SalesDataLakehouse",
        "path": "Tables",
        "create_if_not_exists": true,
        "target": {
          "oneLake": {
            "workspaceId": "shared-workspace-id",
            "itemId": "shared-lakehouse-id",
            "path": "Tables/MasterData"
          }
        }
      }
    ],
    "semantic_models": [
      {
        "name": "SalesAnalyticsModel",
        "description": "Semantic model for sales analytics",
        "create_if_not_exists": true
      }
    ],
    "reports": [
      {
        "name": "SalesDashboard",
        "description": "Executive sales dashboard",
        "semantic_model": "SalesAnalyticsModel",
        "create_if_not_exists": true
      }
    ],
    "paginated_reports": [
      {
        "name": "MonthlySalesReport",
        "description": "Detailed monthly sales report",
        "create_if_not_exists": true
      }
    ],
    "variable_libraries": [
      {
        "name": "DevVariables",
        "description": "Development environment runtime variables",
        "create_if_not_exists": true,
        "variables": [
          {
            "name": "storage_account",
            "value": "devstorageaccount",
            "type": "String",
            "note": "Azure Storage Account name for development"
          },
          {
            "name": "api_endpoint",
            "value": "https://dev-api.contoso.com",
            "type": "String",
            "note": "Development API endpoint URL"
          },
          {
            "name": "log_level",
            "value": "DEBUG",
            "type": "String",
            "note": "Logging level for development"
          },
          {
            "name": "batch_size",
            "value": "1000",
            "type": "Int",
            "note": "Batch size for data processing"
          }
        ]
      }
    ],
    "sql_views": [
      {
        "lakehouse": "SalesDataLakehouse",
        "views": ["SalesSummary", "ProductAnalysis", "RegionalPerformance"],
        "description": "Sales analytics views for development environment"
      }
    ]
  },
  "git_integration": {
    "auto_update_from_git": true,
    "conflict_resolution_policy": "PreferRemote",
    "allow_override_items": true
  },
  "deployment_pipeline": {
    "enabled": false,
    "pipeline_name": "DataEng-Pipeline",
    "description": "Dev workspace uses Git sync for all artifacts. Deployment pipeline is used only for promoting to UAT/Prod.",
    "artifact_types": ["PaginatedReport"],
    "data_source_mapping": {
      "description": "Data source connection details for the Dev environment. Used as the source when promoting via deployment pipeline.",
      "sql_server": "dev-reporting-gold.datawarehouse.fabric.microsoft.com",
      "sql_database": "reporting_gold"
    }
  }
}
