{
  "artifacts_root_folder": "wsartifacts",
  "service_principal": {
    "client_id": "00000000-0000-0000-0000-000000000000",
    "tenant_id": "00000000-0000-0000-0000-000000000000",
    "secret_env_var": "AZURE_CLIENT_SECRET_UAT"
  },
  "workspace": {
    "id": "00000000-0000-0000-0000-000000000000",
    "name": "DataEng-UAT",
    "capacity_id": "00000000-0000-0000-0000-000000000000"
  },
  "lakehouses": {
    "SalesDataLakehouse": {
      "id": "00000000-0000-0000-0000-000000000000",
      "description": "UAT lakehouse for sales data"
    },
    "CustomerDataLakehouse": {
      "id": "00000000-0000-0000-0000-000000000000",
      "description": "UAT lakehouse for customer data"
    }
  },
  "connections": {
    "sql_connection_string": "Server=uat-sql-server.database.windows.net;Database=UATDB;",
    "storage_connection_string": "DefaultEndpointsProtocol=https;AccountName=uatstorageaccount;",
    "api_endpoint": "https://uat-api.company.com"
  },
  "parameters": {
    "storage_account": "uatstorageaccount",
    "key_vault_url": "https://uat-kv.vault.azure.net/",
    "data_lake_path": "abfss://uat@uatstorageaccount.dfs.core.windows.net/",
    "log_level": "INFO",
    "enable_monitoring": "true",
    "batch_size": "500",
    "max_retries": "3"
  },
  "rebind_rules": {
    "semantic_models": [
      {
        "artifact_name": "SalesAnalyticsModel",
        "table_rebindings": [
          {
            "table_name": "FactSales",
            "source_lakehouse": "SalesDataLakehouse",
            "source_workspace_id": "{{workspace_id}}"
          },
          {
            "table_name": "DimDate",
            "source_lakehouse": "SalesDataLakehouse",
            "source_workspace_id": "{{workspace_id}}"
          }
        ]
      }
    ],
    "reports": [
      {
        "artifact_name": "SalesDashboard",
        "dataset_rebinding": {
          "target_dataset": "SalesAnalyticsModel",
          "target_workspace_id": "{{workspace_id}}"
        }
      }
    ],
    "paginated_reports": [
      {
        "artifact_name": "MonthlySalesReport",
        "datasource_rebinding": {
          "datasource_type": "semanticModel",
          "dataset_id": "SalesAnalyticsModel"
        }
      }
    ]
  },
  "artifacts_to_create": {
    "lakehouses": [
      {
        "name": "SalesDataLakehouse",
        "description": "UAT lakehouse for sales data",
        "create_if_not_exists": true
      },
      {
        "name": "CustomerDataLakehouse",
        "description": "UAT lakehouse for customer data",
        "create_if_not_exists": true
      }
    ],
    "environments": [
      {
        "name": "UATSparkEnvironment",
        "description": "UAT Spark environment",
        "create_if_not_exists": true,
        "libraries": [
          {"type": "PyPI", "name": "pandas", "version": "2.1.0"},
          {"type": "PyPI", "name": "numpy", "version": "1.24.0"},
          {"type": "PyPI", "name": "scikit-learn", "version": "1.3.0"}
        ]
      }
    ],
    "kql_databases": [
      {
        "name": "UATAnalyticsDB",
        "description": "UAT KQL database for real-time analytics",
        "create_if_not_exists": true
      }
    ],
    "notebooks": [
      {
        "name": "SetupNotebook",
        "description": "Initial setup and configuration notebook",
        "create_if_not_exists": true,
        "template": "basic_spark",
        "default_lakehouse": "SalesDataLakehouse"
      }
    ],
    "spark_job_definitions": [
      {
        "name": "BaselineSparkJob",
        "description": "Baseline Spark job template",
        "create_if_not_exists": true,
        "main_file": "SetupNotebook",
        "default_lakehouse": "SalesDataLakehouse"
      }
    ],
    "data_pipelines": [
      {
        "name": "InitialPipeline",
        "description": "Initial data pipeline template",
        "create_if_not_exists": true,
        "activities": [
          {
            "name": "Placeholder",
            "type": "Script",
            "script": "print('Pipeline placeholder')"
          }
        ]
      }
    ],
    "shortcuts": [
      {
        "name": "SharedData",
        "description": "OneLake shortcut to shared data",
        "lakehouse": "SalesDataLakehouse",
        "path": "Tables",
        "create_if_not_exists": true,
        "target": {
          "oneLake": {
            "workspaceId": "shared-workspace-id-uat",
            "itemId": "shared-lakehouse-id-uat",
            "path": "Tables/MasterData"
          }
        }
      }
    ],
    "semantic_models": [
      {
        "name": "SalesAnalyticsModel",
        "description": "Semantic model for sales analytics",
        "create_if_not_exists": true
      }
    ],
    "reports": [
      {
        "name": "SalesDashboard",
        "description": "Executive sales dashboard",
        "semantic_model": "SalesAnalyticsModel",
        "create_if_not_exists": true
      }
    ],
    "paginated_reports": [
      {
        "name": "MonthlySalesReport",
        "description": "Detailed monthly sales report",
        "create_if_not_exists": true
      }
    ],
    "variable_libraries": [
      {
        "name": "UatVariables",
        "description": "UAT environment runtime variables",
        "create_if_not_exists": true,
        "variables": [
          {
            "name": "storage_account",
            "value": "uatstorageaccount",
            "type": "String",
            "description": "Azure Storage Account name for UAT"
          },
          {
            "name": "api_endpoint",
            "value": "https://uat-api.contoso.com",
            "type": "String",
            "description": "UAT API endpoint URL"
          },
          {
            "name": "log_level",
            "value": "INFO",
            "type": "String",
            "description": "Logging level for UAT"
          },
          {
            "name": "batch_size",
            "value": "5000",
            "type": "Int",
            "description": "Batch size for data processing"
          }
        ]
      }
    ],
    "sql_views": [
      {
        "lakehouse": "SalesDataLakehouse",
        "views": ["SalesSummary", "ProductAnalysis", "RegionalPerformance"],
        "description": "Sales analytics views for UAT environment"
      }
    ]
  }
}
